# Railway Deployment Configuration
# https://railway.app

[build]
builder = "dockerfile"
dockerfilePath = "backend/Dockerfile"

[deploy]
startCommand = "sh -c 'npx prisma migrate deploy && node dist/server.js'"
healthcheckPath = "/health"
healthcheckTimeout = 60
healthcheckTimeout = 30
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

[[services]]
name = "anchor-backend"
internalPort = 3001
