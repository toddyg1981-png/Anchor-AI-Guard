# Railway Deployment Configuration
# https://railway.app

[build]
builder = "dockerfile"
dockerfilePath = "backend/Dockerfile"
dockerContext = "backend"
# Force no cache
dockerfileNoCache = true

[deploy]
startCommand = "sh -c 'npx prisma db push --skip-generate && node dist/server.js'"
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

[[services]]
name = "anchor-backend"
internalPort = 3001
